<style>
  .addCategory
  {
      position: relative;
      top: 7px;
  }
  #notice {
    color:green;
  }
</style>


<script type="text/javascript">
  $(document).on("click", "#createCategoryButton", function(){
      $("#newCategory").show();
      return false; 

  });
</script>
<%= javascript_include_tag "https://www.gstatic.com/charts/loader.js" %>
<%= pie_chart(@category_data) %>
<%= line_chart @daily_expense_data %>
<%= geo_chart({'United States'=>"44", 'Germany'=>"23", 'Brazil'=> "22"}) %>


<div class="container">
<p id="notice"><%= notice %></p>

<h4>Expenses</h4>
    <div>
    <label for="category" style="margin-top:7px"> Category? </label>
    <a href="" class="addCategory" id="createCategoryButton"><i class="material-icons" style="bottom:10px">add</i></a>
  </div>
    <div id="newCategory" style="display:none;"> 
      <%= render 'categories/form', category: @category %>
      </div>
<div style="margin-top:10px">
<%= render 'form', expense: @expense %>
</div>



<table class="striped">
  <thead>
    <tr>
      <th> Activity </th>
      <th> Cost </th>
      <th> Date </th>
      <th> Category </th>
      <th> Oops </th>
    </tr>
  </thead>

  <tbody>

    <% @expenses.each do |expense| %>

      <tr>
        <td> <%= expense.expense %> </td>
        <td> <%= expense.amount %></td>
        <td> <%= expense.created_at.strftime("%b %d, %Y") %></td>
        <td> 
          <% if expense.category_id != nil %>
            <%= Category.find_by(id: expense.category_id).name %>
          <% end %>
         </td>
        <td> <%= link_to 'Delete', expense, method: :delete, data: { confirm: 'Are you sure?' } %> </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= will_paginate @expenses %>

<br>

</div>
